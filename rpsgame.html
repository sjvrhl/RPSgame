<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Rock Paper Scissors</title>
    <meta name="author" content="Steven Overheul" />
  </head>
  <body>
    <script>
      function game() {
        let playerScore = 0;
        let computerScore = 0;
        let gameRound = 0;
        while (gameRound < 1) {
          let playerSelection = prompt(`Let's play rock, paper, scissors!
The player with the highest score after 5 rounds wins.
Do you choose rock, paper, or scissors?`).toLowerCase();
          let computerSelection = computerPlay();
          alert(playRound(playerSelection, computerSelection));
        }
        while (gameRound > 0 && gameRound < 5) {
          let playerSelection = prompt(`Round ${++gameRound}!
Do you choose rock, paper, or scissors?`).toLowerCase();
          --gameRound;
          let computerSelection = computerPlay();
          alert(playRound(playerSelection, computerSelection));
        }
        while (gameRound >= 5 && playerScore == computerScore) {
          let playerSelection = prompt(`Tie after ${gameRound} rounds!
It's all or nothing: next player to win a round wins the game.
Do you choose rock, paper, or scissors?`).toLowerCase();
          let computerSelection = computerPlay();
          alert(playRound(playerSelection, computerSelection));
        }
        if (gameRound >= 5 && playerScore > computerScore) {
          alert(`Congrats! In ${gameRound} rounds you've beat the computer ${playerScore} : ${computerScore}
Tap the button for a new game or leave the page to quit.`)
        } else {
          alert(`Bummer... In ${gameRound} rounds the computer beat you ${computerScore} : ${playerScore}
Tap the button for a new game or leave the page to quit.`)
        }

        function computerPlay() {
          const computerSelection = ["rock", "paper", "scissors"];
          const random = Math.floor(Math.random() * 3);
          return computerSelection[random];
        }

        function playRound(playerSelection, computerSelection) {
          if (
            (playerSelection === "scissors" && computerSelection === "rock") ||
            (playerSelection === "rock" && computerSelection === "paper") ||
            (playerSelection === "paper" && computerSelection === "scissors")
          ) {
            return `${playerSelection.slice(0, 1).toUpperCase() + playerSelection.slice(1)} does not beat ${computerSelection};
Computer wins round ${++gameRound} and gains 1 point
The score is ${playerScore} : ${++computerScore}`;
          } else if (
            (playerSelection === "rock" && computerSelection === "scissors") ||
            (playerSelection === "paper" && computerSelection === "rock") ||
            (playerSelection === "scissors" && computerSelection === "paper")
          ) {
            return `${playerSelection.slice(0, 1).toUpperCase() + playerSelection.slice(1)} beats ${computerSelection};
You win round ${++gameRound} and gain 1 point
The score is ${++playerScore} : ${computerScore}`;
          } else if (playerSelection === computerSelection) {
            return `You both chose ${playerSelection}; it's a tie!
With ${++gameRound} round(s) played the score remains ${playerScore} : ${computerScore}`;
          } else {
            return `Invalid entry. The score remains ${playerScore} : ${computerScore}`;
          }
        }
      }

      game();
      location.reload();
    </script>
  </body>
</html>
